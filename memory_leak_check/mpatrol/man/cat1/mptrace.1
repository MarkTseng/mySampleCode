


MPTRACE(1)               mpatrol library               MPTRACE(1)


NNAAMMEE
       mptrace  -  displays  tracing  information produced by the
       mpatrol library

SSYYNNOOPPSSIISS
       mmppttrraaccee [_o_p_t_i_o_n_s] [_f_i_l_e]

DDEESSCCRRIIPPTTIIOONN
       The mmppttrraaccee command is a tool designed to read  a  tracing
       output  file  produced  by the mpatrol library and display
       the tracing information that was  obtained.   The  tracing
       information  is a concise encoded trace of all of the mem-
       ory allocation events that  occurred  during  a  program's
       execution,  and  can  be decoded into tabular or graphical
       form, along with any relevant statistics that can be  cal-
       culated.

       When  the  TTRRAACCEE  option is used with the mpatrol library,
       statistics for all dynamic memory  allocations,  realloca-
       tions  and  deallocations  are written to a tracing output
       file.  The name of this  file  can  be  changed  with  the
       TTRRAACCEEFFIILLEE option.

       Only  allocations,  reallocations  and  deallocations  are
       recorded.  The intention of tracing is to  gather  concise
       details  about  each  memory  allocation event rather than
       complete information about some or all memory allocations.
       As  a  result,  the mpatrol log files and profiling output
       files contain more detailed information  about  individual
       memory  allocations, whereas the tracing output files con-
       tain a broader view of allocation behaviour throughout the
       entire program.

       The  _f_i_l_e  argument must be a valid mpatrol tracing output
       filename but if _f_i_l_e is omitted then mmppttrraaccee will use _m_p_a_-
       _t_r_o_l_._t_r_a_c_e  as the name of the tracing output file to use.
       If _f_i_l_e is given as _- then the standard input file  stream
       will be used as the tracing output file.

       A  C  source file containing a trace-driven memory alloca-
       tion simulation program can be written with the ----ssiimm--ffiillee
       option.  This program will have the identical memory allo-
       cation behaviour to the program which produced the  origi-
       nal  trace  file.  This option can be useful to use if you
       wish to determine which malloc library is most suitable to
       use for a specific application.

       A  trace  file  in Heap Allocation Trace Format (HATF) can
       also be written out by the mmppttrraaccee command  by  using  the
       ----hhaattff--ffiillee  option.   It takes the name of the HATF trace
       file to be written as an argument and writes out the  HATF
       version  of the mpatrol tracing output file given as input
       when it is being processed.  The HATF file  format  is  an
       attempt to standardise trace file formats for memory allo-
       cation tracing, and is being developed  by  Benjamin  Zorn
       and  Richard  Jones.   There  is a HATF DTD located in the
       _e_x_t_r_a directory in the mpatrol distribution.

       The mmppttrraaccee command will normally be built with  GUI  sup-
       port  on  UNIX platforms that are running X Windows.  This
       means that a graphical memory map display of the heap will
       be  shown  in  a window every time mmppttrraaccee is run with the
       ----gguuii option.  This display is updated every  time  a  new
       event  is read from the tracing output file and by default
       uses the colour red for internal heap memory (used by  the
       mpatrol  library), blue for unallocated heap memory, black
       for allocated memory and white for free  memory.   Options
       exist  to change this colour scheme, as well as the dimen-
       sions of the drawing area and the window.

       By default, it is assumed that the start  address  of  the
       first event that appears in the tracing output file is the
       base address of the memory map displayed  in  the  window.
       If  the  heap grows downwards then this assumption will be
       incorrect (since nothing will be  displayed)  and  so  the
       ----bbaassee  option  must be used to specify a reasonable lower
       bound for the final memory map.  In addition, the  visible
       address  space  displayed  in the memory map is fixed to a
       certain size (4 megabytes by default),  but  this  can  be
       changed  with  the ----ssppaaccee option.  A small delay can also
       be  added  after  drawing  each  memory  allocation  event
       through the use of the ----ddeellaayy option.

       Note that any options that are specific to the GUI version
       of mmppttrraaccee are read by the X command  line  parser  rather
       than  directly  by  mmppttrraaccee.   As a result they are parsed
       according to X toolkit rules and  do  not  appear  in  the
       quick-reference  option  summary  produced  by  the ----hheellpp
       option.  The  application  class  for  setting  mmppttrraaccee  X
       resources is called _M_P_T_r_a_c_e.

       The  idea  for  graphically displaying a memory map of the
       heap comes from the xxmmeemm tool supplied with the University
       of  Toronto  Computer  Systems  Research  Institute malloc
       library, written by Mark Moraes.  However, the  documenta-
       tion  for that tool remarks that it was written as a quick
       and dirty hack.  The mmppttrraaccee  command  is  hopefully  more
       stable and contains a lot more functionality.

OOPPTTIIOONNSS
       ----gguuii [--ww]
              Displays the GUI (if supported).

       ----hhaattff--ffiillee _f_i_l_e [--HH]
              Specifies  that the trace should also be written to
              a file in Heap Allocation Trace Format (HATF).

       ----hheellpp [--hh]
              Displays a quick-reference option summary.

       ----ssiimm--ffiillee _f_i_l_e [--SS]
              Specifies that  a  trace-driven  memory  allocation
              simulation  program  written in C should be written
              to a file.

       ----ssoouurrccee [--ss]
              Displays source-level information for each event in
              the tracing table, if available.

       ----vveerrbboossee [--vv]
              Specifies  that  the  tracing  table should be dis-
              played.

       ----vveerrssiioonn [--VV]
              Displays the version number of the mmppttrraaccee command.

GGUUII OOPPTTIIOONNSS
       ----aalllloocc _c_o_l_o_u_r
              Specifies  the  colour  to use for displaying allo-
              cated memory.  The default colour is _b_l_a_c_k.

       ----bbaassee _a_d_d_r_e_s_s
              Specifies the base address of the  visible  address
              space  displayed  in  the  memory map.  The default
              address is calculated at run-time  from  the  start
              address of the first memory allocation event in the
              tracing output file.

       ----ddeellaayy _l_e_n_g_t_h
              Specifies that a small delay of  a  certain  length
              should  be  added after drawing each memory alloca-
              tion event.  The delay does  not  correspond  to  a
              specific unit of time, but experimentation with the
              length  should  yield  satisfactory  results.   The
              default delay is _0.

       ----ffrreeee _c_o_l_o_u_r
              Specifies  the  colour  to  use for displaying free
              memory.  The default colour is _w_h_i_t_e.

       ----hheeiigghhtt _s_i_z_e
              Specifies the height (in  pixels)  of  the  drawing
              area.  The default height is _5_1_2.

       ----iinntteerrnnaall _c_o_l_o_u_r
              Specifies the colour to use for displaying internal
              heap memory.  The default colour is _r_e_d.

       ----ssppaaccee _s_i_z_e
              Specifies the size (in megabytes)  of  the  visible
              address  space  displayed  in  the memory map.  The
              default size is _4.

       ----uunnaalllloocc _c_o_l_o_u_r
              Specifies the colour to use for displaying  unallo-
              cated heap memory.  The default colour is _b_l_u_e.

       ----vviieeww--hheeiigghhtt _s_i_z_e
              Specifies  the  height  (in  pixels) of the window.
              The default height is _2_5_6.

       ----vviieeww--wwiiddtthh _s_i_z_e
              Specifies the width (in pixels) of the window.  The
              default width is _2_5_6.

       ----wwiiddtthh _s_i_z_e
              Specifies  the  width  (in  pixels)  of the drawing
              area.  The default width is _5_1_2.

SSEEEE AALLSSOO
       mmppaattrrooll(1), mmpprrooff(1), mmlleeaakk(1), mmppssyymm(1), mmppeeddiitt(1),  hheexx--
       wwoorrddss(1), XX(1), lliibbmmppaattrrooll(3), lliibbmmppaalllloocc(3).

       The mpatrol manual and reference card.

       http://www.cbmamiga.demon.co.uk/mpatrol/

AAUUTTHHOORR
       Graeme S. Roy <graeme.roy@analog.com>

CCOOPPYYRRIIGGHHTT
       Copyright      (C)     1997-2002     Graeme     S.     Roy
       <graeme.roy@analog.com>

       This library is free software;  you  can  redistribute  it
       and/or  modify  it under the terms of the GNU Library Gen-
       eral Public License as  published  by  the  Free  Software
       Foundation;  either  version 2 of the License, or (at your
       option) any later version.

       This library is distributed in the hope that  it  will  be
       useful, but WITHOUT ANY WARRANTY; without even the implied
       warranty of MERCHANTABILITY or FITNESS  FOR  A  PARTICULAR
       PURPOSE.   See  the GNU Library General Public License for
       more details.

       You should have received a copy of the GNU Library General
       Public  License  along with this library; if not, write to
       the Free Software Foundation, Inc., 59 Temple Place, Suite
       330, Boston, MA 02111-1307, USA.



Release 1.4               8 January 2002                        1












































