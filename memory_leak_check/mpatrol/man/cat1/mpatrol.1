


MPATROL(1)               mpatrol library               MPATROL(1)


NNAAMMEE
       mpatrol - runs programs using the mpatrol library

SSYYNNOOPPSSIISS
       mmppaattrrooll [_o_p_t_i_o_n_s] <_c_o_m_m_a_n_d> [_a_r_g_u_m_e_n_t_s]

DDEESSCCRRIIPPTTIIOONN
       The mmppaattrrooll command is used to set various mpatrol library
       _o_p_t_i_o_n_s when running _c_o_m_m_a_n_d with its _a_r_g_u_m_e_n_t_s.  In  most
       cases,  _c_o_m_m_a_n_d  must  have  been  linked with the mpatrol
       library, unless the _-_-_d_y_n_a_m_i_c option is used in which case
       _c_o_m_m_a_n_d need only have been dynamically linked.

       All  mpatrol library diagnostics are sent to the file _m_p_a_-
       _t_r_o_l_._%_n_._l_o_g in the current directory by default (where  _%_n
       is  the  current process id) but this can be changed using
       the ----lloogg--ffiillee option.  Similarly, the  default  profiling
       output  filename is _m_p_a_t_r_o_l_._%_n_._o_u_t and the default tracing
       output filename is _m_p_a_t_r_o_l_._%_n_._t_r_a_c_e.

OOPPTTIIOONNSS
       All of the following options  (except  ----ddyynnaammiicc,  ----hheellpp,
       ----rreeaadd--eennvv,  ----sshhooww--eennvv,  ----tthhrreeaaddss  and ----vveerrssiioonn) corre-
       spond to their listed mpatrol library option.  See lliibbmmppaa--
       ttrrooll(3) for more details on these options.

       ----aalllloocc--bbyyttee <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--aa]
              [AALLLLOOCCBBYYTTEE]   Specifies  an 8-bit byte pattern with
              which to prefill newly-allocated memory.

       ----aalllloocc--ssttoopp <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--AA]
              [AALLLLOOCCSSTTOOPP]  Specifies an allocation index at which
              to stop the program when it is being allocated.

       ----aallllooww--ooffllooww [--MM]
              [AALLLLOOWWOOFFLLOOWW]   Specifies that a warning rather than
              an error should be produced if any memory operation
              function overflows the boundaries of a memory allo-
              cation, and that the operation should still be per-
              formed.

       ----aauuttoo--ssaavvee <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--ss]
              [AAUUTTOOSSAAVVEE]   Specifies  the  frequency  at which to
              periodically write the profiling data to  the  pro-
              filing output file.

       ----cchheecckk <_u_n_s_i_g_n_e_d _r_a_n_g_e> [--cc]
              [CCHHEECCKK]  Specifies a range of allocation indices at
              which to check the integrity  of  free  memory  and
              overflow buffers.

       ----cchheecckk--aallll [--CC]
              [CCHHEECCKKAALLLL]    Equivalent   to  the  ----cchheecckk--aallllooccss,
              ----cchheecckk--rreeaallllooccss, ----cchheecckk--ffrreeeess and  ----cchheecckk--mmeemmoorryy
              options specified together.

       ----cchheecckk--aallllooccss
              [CCHHEECCKKAALLLLOOCCSS]   Checks  that  no attempt is made to
              allocate a block of memory of size zero.

       ----cchheecckk--ffoorrkk
              [CCHHEECCKKFFOORRKK]  Checks at every call  to  see  if  the
              process  has been forked in case new log, profiling
              and tracing output files need to be started.

       ----cchheecckk--ffrreeeess
              [CCHHEECCKKFFRREEEESS]  Checks that no  attempt  is  made  to
              deallocate a NNUULLLL pointer.

       ----cchheecckk--mmeemmoorryy
              [CCHHEECCKKMMEEMMOORRYY]   Checks  that  no attempt is made to
              perform a zero-length memory operation  on  a  NNUULLLL
              pointer.

       ----cchheecckk--rreeaallllooccss
              [CCHHEECCKKRREEAALLLLOOCCSS]   Checks that no attempt is made to
              reallocate a NNUULLLL pointer  or  resize  an  existing
              block of memory to size zero.

       ----ddeeff--aalliiggnn <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--DD]
              [DDEEFFAALLIIGGNN]   Specifies  the  default  alignment for
              general-purpose memory allocations, which must be a
              power of two.

       ----ddyynnaammiicc [--dd]
              Specifies  that programs which were not linked with
              the mpatrol library should also be traced, but only
              if  they were dynamically linked.  This option will
              only work if the  system  dynamic  linker  has  the
              ability  to  preload a set of user-specified shared
              libraries via a special environment variable.

       ----eeddiitt [--ee]
              [EEDDIITT]  Specifies that  a  text  editor  should  be
              invoked  to edit any relevant source files that are
              associated with any warnings or  errors  when  they
              occur.

       ----ffaaiill--ffrreeqq <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--qq]
              [FFAAIILLFFRREEQQ]   Specifies  the  frequency at which all
              memory allocations will randomly fail.

       ----ffaaiill--sseeeedd <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--QQ]
              [FFAAIILLSSEEEEDD]  Specifies the random number seed  which
              will  be used when determining which memory alloca-
              tions will randomly fail.

       ----ffrreeee--bbyyttee <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--ff]
              [FFRREEEEBBYYTTEE]  Specifies an 8-bit  byte  pattern  with
              which to prefill newly-freed memory.

       ----ffrreeee--ssttoopp <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--FF]
              [FFRREEEESSTTOOPP]   Specifies an allocation index at which
              to stop the program when it is being freed.

       ----hheellpp [--hh]
              Displays a quick-reference option summary.

       ----llaarrggee--bboouunndd <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r>
              [LLAARRGGEEBBOOUUNNDD]  Specifies the limit in  bytes  up  to
              which  memory  allocations  should be classified as
              large allocations for profiling purposes.

       ----lleeaakk--ttaabbllee
              [LLEEAAKKTTAABBLLEE] Specifies that the leak table should be
              automatically  used and a leak table summary should
              be displayed at the end of program execution.

       ----lliimmiitt <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--uu]
              [LLIIMMIITT]  Specifies the limit in bytes at which  all
              memory  allocations  should fail if the total allo-
              cated memory should increase beyond this.

       ----lliisstt [--ii]
              [LLIISSTT]  Specifies that a context listing should  be
              shown  for any relevant source files that are asso-
              ciated with any warnings or errors when they occur.

       ----lloogg--aallll [--LL]
              [LLOOGGAALLLL]     Equivalent    to   the   ----lloogg--aallllooccss,
              ----lloogg--rreeaallllooccss,   ----lloogg--ffrreeeess   and    ----lloogg--mmeemmoorryy
              options specified together.

       ----lloogg--aallllooccss
              [LLOOGGAALLLLOOCCSS]   Specifies that all memory allocations
              are to be logged and sent to the log file.

       ----lloogg--ffiillee <_s_t_r_i_n_g> [--ll]
              [LLOOGGFFIILLEE]  Specifies an alternative file  in  which
              to  place all diagnostics from the mpatrol library.

       ----lloogg--ffrreeeess
              [LLOOGGFFRREEEESS]  Specifies that all memory deallocations
              are to be logged and sent to the log file.

       ----lloogg--mmeemmoorryy
              [LLOOGGMMEEMMOORRYY]   Specifies  that all memory operations
              are to be logged and sent to the log file.

       ----lloogg--rreeaallllooccss
              [LLOOGGRREEAALLLLOOCCSS]  Specifies that all memory  realloca-
              tions are to be logged and sent to the log file.

       ----mmeeddiiuumm--bboouunndd <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r>
              [MMEEDDIIUUMMBBOOUUNNDD]   Specifies  the limit in bytes up to
              which memory allocations should  be  classified  as
              medium allocations for profiling purposes.

       ----nnoo--ffrreeee <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--nn]
              [NNOOFFRREEEE]  Specifies that a number of recently-freed
              memory allocations should be prevented  from  being
              returned to the free memory pool.

       ----nnoo--pprrootteecctt [--NN]
              [NNOOPPRROOTTEECCTT]   Specifies  that the mpatrol library's
              internal data structures should not be  made  read-
              only after every memory allocation, reallocation or
              deallocation.

       ----ooffllooww--bbyyttee <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--oo]
              [OOFFLLOOWWBBYYTTEE]  Specifies an 8-bit byte  pattern  with
              which  to  fill  the overflow buffers of all memory
              allocations.

       ----ooffllooww--ssiizzee <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--OO]
              [OOFFLLOOWWSSIIZZEE]  Specifies the size in bytes to use for
              all overflow buffers, which must be a power of two.

       ----ooffllooww--wwaattcchh [--ww]
              [OOFFLLOOWWWWAATTCCHH]   Specifies  that  watch  point  areas
              should  be  used  for  overflow buffers rather than
              filling with the overflow byte.

       ----ppaaggee--aalllloocc--lloowweerr [--bb]
              [PPAAGGEEAALLLLOOCC=_L_O_W_E_R]  Specifies that  each  individual
              memory  allocation  should occupy at least one page
              of virtual memory and should be placed at the  low-
              est point within these pages.

       ----ppaaggee--aalllloocc--uuppppeerr [--BB]
              [PPAAGGEEAALLLLOOCC=_U_P_P_E_R]   Specifies  that each individual
              memory allocation should occupy at least  one  page
              of virtual memory and should be placed at the high-
              est point within these pages.

       ----pprreesseerrvvee [--vv]
              [PPRREESSEERRVVEE]  Specifies that any reallocated or freed
              memory  allocations  should preserve their original
              contents.

       ----pprrooff [--pp]
              [PPRROOFF]  Specifies that all memory  allocations  are
              to  be  profiled  and  sent to the profiling output
              file.

       ----pprrooff--ffiillee <_s_t_r_i_n_g> [--PP]
              [PPRROOFFFFIILLEE]  Specifies an alternative file in  which
              to  place  all memory allocation profiling informa-
              tion from the mpatrol library.

       ----pprroogg--ffiillee <_s_t_r_i_n_g> [--rr]
              [PPRROOGGFFIILLEE]  Specifies an alternative filename  with
              which  to locate the executable file containing the
              program's symbols.

       ----rreeaadd--eennvv [--II]
              Reads and passes through the contents of  the  MMPPAA--
              TTRROOLL__OOPPTTIIOONNSS  environment  variable.  Such contents
              will be placed before any of the options  resulting
              from  mmppaattrrooll command line options so that they can
              be overridden and will only be parsed by  the  mpa-
              trol library, _n_o_t the mmppaattrrooll command.

       ----rreeaalllloocc--ssttoopp <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--RR]
              [RREEAALLLLOOCCSSTTOOPP]   Specifies  an  allocation  index at
              which to stop the program when a memory  allocation
              is being reallocated.

       ----ssaaffee--ssiiggnnaallss [--GG]
              [SSAAFFEESSIIGGNNAALLSS]   Instructs  the  library to save and
              replace certain signal handlers during  the  execu-
              tion  of  library  code  and to restore them after-
              wards.

       ----sshhooww--aallll [--SS]
              [SSHHOOWWAALLLL]    Equivalent   to    the    ----sshhooww--ffrreeee,
              ----sshhooww--ffrreeeedd,    ----sshhooww--uunnffrreeeedd,   ----sshhooww--mmaapp   and
              ----sshhooww--ssyymmbboollss options specified together.

       ----sshhooww--eennvv [--EE]
              Displays the contents of the MMPPAATTRROOLL__OOPPTTIIOONNSS  envi-
              ronment  variable.  This will be shown after all of
              the other command line options have been  processed
              and  will  prevent the specified command from being
              run.

       ----sshhooww--ffrreeee
              [SSHHOOWWFFRREEEE]  Specifies that a summary of all of  the
              free  memory  blocks should be displayed at the end
              of program execution.

       ----sshhooww--ffrreeeedd
              [SSHHOOWWFFRREEEEDD]  Specifies that a summary of all of the
              freed memory allocations should be displayed at the
              end of program execution.

       ----sshhooww--mmaapp
              [SSHHOOWWMMAAPP]  Specifies  that  a  memory  map  of  the
              entire  heap should be displayed at the end of pro-
              gram execution.

       ----sshhooww--ssyymmbboollss
              [SSHHOOWWSSYYMMBBOOLLSS]  Specifies that a summary of  all  of
              the  function  symbols read from the program's exe-
              cutable file should be displayed at the end of pro-
              gram execution.

       ----sshhooww--uunnffrreeeedd
              [SSHHOOWWUUNNFFRREEEEDD]   Specifies  that a summary of all of
              the unfreed memory allocations should be  displayed
              at the end of program execution.

       ----ssmmaallll--bboouunndd <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r>
              [SSMMAALLLLBBOOUUNNDD]   Specifies  the  limit in bytes up to
              which memory allocations should  be  classified  as
              small allocations for profiling purposes.

       ----tthhrreeaaddss [--jj]
              Specifies  that  the  program  to  be run is multi-
              threaded if the ----ddyynnaammiicc  option  is  used.   This
              option  is required if the multithreaded version of
              the mpatrol library should be preloaded instead  of
              the normal version.

       ----ttrraaccee [--tt]
              Specifies  that  all  memory  allocations are to be
              traced and sent to the tracing output file.

       ----ttrraaccee--ffiillee <_s_t_r_i_n_g> [--TT]
              Specifies an alternative file in which to place all
              memory allocation tracing information from the mpa-
              trol library.

       ----uunnffrreeeedd--aabboorrtt <_u_n_s_i_g_n_e_d _i_n_t_e_g_e_r> [--UU]
              [UUNNFFRREEEEDDAABBOORRTT]  Specifies  the  minimum  number  of
              unfreed  allocations  at which to abort the program
              just before program termination.

       ----uussee--ddeebbuugg [--gg]
              [UUSSEEDDEEBBUUGG]  Specifies that any  debugging  informa-
              tion  in  the  executable  file  should  be used to
              obtain additional source-level information.

       ----uussee--mmmmaapp [--mm]
              [UUSSEEMMMMAAPP]  Specifies that the  library  should  use
              mmmmaapp(()) instead of ssbbrrkk(()) to allocate user memory.

       ----vveerrssiioonn [--VV]
              Displays the version number of the mmppaattrrooll command.

SSEEEE AALLSSOO
       mmpprrooff(1), mmppttrraaccee(1), mmlleeaakk(1), mmppssyymm(1), mmppeeddiitt(1),  hheexx--
       wwoorrddss(1), lliibbmmppaattrrooll(3), lliibbmmppaalllloocc(3).

       The mpatrol manual and reference card.

       http://www.cbmamiga.demon.co.uk/mpatrol/

AAUUTTHHOORR
       Graeme S. Roy <graeme.roy@analog.com>

CCOOPPYYRRIIGGHHTT
       Copyright  (C)  1997-2002  Graeme  S. Roy <graeme.roy@ana-
       log.com>

       This library is free software;  you  can  redistribute  it
       and/or  modify  it under the terms of the GNU Library Gen-
       eral Public License as  published  by  the  Free  Software
       Foundation;  either  version 2 of the License, or (at your
       option) any later version.

       This library is distributed in the hope that  it  will  be
       useful, but WITHOUT ANY WARRANTY; without even the implied
       warranty of MERCHANTABILITY or FITNESS  FOR  A  PARTICULAR
       PURPOSE.   See  the GNU Library General Public License for
       more details.

       You should have received a copy of the GNU Library General
       Public  License  along with this library; if not, write to
       the Free Software Foundation, Inc., 59 Temple Place, Suite
       330, Boston, MA 02111-1307, USA.



Release 1.4               8 January 2002                        1



































